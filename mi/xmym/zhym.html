<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>账号页面</title>
    <link rel="stylesheet" href="bootstrap/dist/css/bootstrap.css">
    <script src="jquery/jquery.min.js"></script>
    <script src="bootstrap/dist/js/bootstrap.js"></script>
    <script src="local.js"></script>
</head>
<style>
    body{
        width: 100%;
        height: 100%;
        background-color: #eeeeee;
    }
</style>
<body>
<!--注册小米账号的头部-->
<div class="container" style="height: 800px;width: 850px;background-color: white">
    <div style="text-align: center"><img src="imgs/hmtb.png" alt=""></div>
    <div style="text-align: center"><h2>注册小米账号</h2></div>
    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3"></div>
    <!--注册小米账号的内容-->
    <form action="dlym.html">
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <div>
                <input type="text" class="one"  id="one" style="width: 390px;height: 40px"  placeholder="手机号">
                <div class="help-block">手机号码请再三确认</div>
                <div id="ones"></div>
            </div>
            <div>
                <input type="password" id="two"  style="width: 390px;height: 40px"  placeholder="密码">
                <div class="help-block">密码为6-18位数字和字母</div>
                <div id="twos"></div>
            </div>
            <div>
                <input type="password" id="three" style="width: 390px;height: 40px"  placeholder="确认密码">
                <div class="help-block">确认密码</div>
                <div id="threes"></div>
            </div>
            <button type="button" id="zhuce" class="btn btn-warning btn-block btn-lg" style="margin-top: 50px">立即注册</button>
            <div id="four"></div>
            <p>注册帐号即表示您同意并愿意遵守小米 <a href="#">用户协议</a>和 <a href="#">隐私政策</a></p>
        </div>
    </form>
    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3"></div>
</div>
<script>
//失去焦点验证手机号码及密码，确认密码等
    $('#one').blur(function () {
        var one=$('#one').val();
        if(one==''){
            document.getElementById('ones').innerHTML='手机号码不能为空';
            document.getElementById('one').style.border='1px solid red';
            document.getElementById('ones').style.color='red';
            return false;
        }
        if(!(/^1[3|4|5|8][0-9]\d{4,8}$/.test(one))){
        document.getElementById('ones').innerHTML='手机号码格式不正确';
        document.getElementById('one').style.border='1px solid red';
        document.getElementById('ones').style.color='red';
        return false;
    }
    else {
            document.getElementById('ones').innerHTML='手机号码格式正确';
            document.getElementById('one').style.border='1px solid green';
            document.getElementById('ones').style.color='green';
            return true;
        }
    });
    $('#two').blur(function () {
        var two=$('#two').val();
        if(two==''){
        document.getElementById('twos').innerHTML='密码不能为空';
        document.getElementById('two').style.border='1px solid red';
        document.getElementById('twos').style.color='red';
        return false;
    }
        if(!(/^[a-zA-Z0-9]{6,18}$/.test(two))){
            document.getElementById('twos').innerHTML='密码为6-18位数字和字母';
            document.getElementById('two').style.border='1px solid red';
            document.getElementById('twos').style.color='red';
        return false;
    }
    else {
        document.getElementById('twos').innerHTML='密码格式正确';
        document.getElementById('two').style.border='1px solid green';
        document.getElementById('twos').style.color='green';
        return true;
    }
    });
    $('#three').blur(function () {
        var three=$('#three').val();
        var two=$('#two').val();
        if(three==''){
           $('#threes').html('确认密码不能为空');
            document.getElementById('three').style.border='1px solid red';
            document.getElementById('threes').style.color='red';
            return false;
        }
        if((three!=two)){
            $('#threes').html('两次输入不一致');
            document.getElementById('three').style.border='1px solid red';
            document.getElementById('threes').style.color='red';
            return false;
        }
        else {
            $('#threes').html('密码格式正确');
            document.getElementById('three').style.border='1px solid green';
            document.getElementById('threes').style.color='green';
            return true;
        }
    });
//点击注册时的数据验证
    $('#zhuce').click(function () {
        if($('#two').val()!=$('#three').val()){
            $('#four').html('密码与确认密码不一致');
            document.getElementById('four').style.color='red';
            return false;
        }
        if($('#one').val()==''||$('#two').val()==''||$('#three').val()==''){
        $('#four').html('不要心急，请将资料填写完整');
         document.getElementById('four').style.color='red';
         return false;
        }
        else {
            var p1=$('#one').val();
            var p2=$('#two').val();
            var p3=$('#three').val();

            console.log(p1+p2+p3);
            var user = {
                name : p1,
            password : p2
            };
            store.update('USER',user);
            location.href = 'dlym.html'
        }
    })

</script>
</body>
</html>